<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        layout:decorate="~{fragment/integrated_layout}" >

<th:block layout:fragment="content_css">
    <!-- <link rel="stylesheet" href="/"> -->
</th:block>

<th:block layout:fragment="contentFragment">
    <div>
        <!-- 문의사항 목록 페이지 -->
        <div class="mb-5">
            <h3>문의사항 목록</h3>
        </div>

        <!-- 검색 -->
        <div class="row justify-content-center mb-5">
            <div class="col-lg-6 text-center">
                <form action="/board/qnaList" method="post">
                    <div class="input-group">
                        <select class="form-select" name="searchType">
                            <option value="BOARD_TITLE" th:selected="${searchVO.searchType == NULL or searchVO.searchType == 'BOARD_TITLE'}">제목</option>
                            <option value="BOARD_CONTENT" th:selected="${searchVO.searchType == BOARD_CONTENT}">내용</option>
                        </select>
                        <input type="text" name="searchValue" class="form-control" th:value="${searchVO.searchValue}">
                        <button type="submit" class="btn btn-primary">검색</button>
                    </div>
                </form>
            </div>
        </div>
            
        <!-- 문의사항 목록 -->
        <div class="row">
            <div class="col">
                <div class="row">
                    <table class="table table-striped table-hover text-center align-middle">
                        <colgroup>
                            <col width="10%"> 
                            <col width="40%">
                            <col width="20%">
                            <col width="10%">
                        </colgroup>
                        <thead>
                            <tr>
                                <td>No</td>
                                <td>제목</td>
                                <td>작성자</td>
                                <td>조회수 </td>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- (typeNum 3, 4 = 문의사항 학생, 강사)게시글이 없을 때 -->
                            <th:block th:if="${#lists.isEmpty(qnaList)}">
                                <tr>
                                    <td colspan="4"> 조회된 게시글이 없습니다. </td>
                                </tr>
                            </th:block>
                            <!-- (typeNum 3, 4 = 문의사항 학생, 강사)게시글이 있을 때 조회 -->
                            <!-- <th:block th:unless="${typeNum} == 3 or ${typeNum} == 4"> -->
                            <th:block th:unless="${#lists.isEmpty(qnaList)}">
                                <tr th:each="qna, state : ${qnaList}">
                                    <td>[[${totalDataCnt - (searchVO.displayDataCnt * (searchVO.nowPage - 1) ) - state.index}]]</td>
                                    <td>
                                        <a th:href="@{/board/qnaDetail(boardNum=${qna.boardNum})}">
                                            [[${qna.boardTitle}]]
                                        </a>
                                    </td>
                                    <td>[[${qna.memberId}]]</td>
                                    <td>[[${qna.boardCnt}]]</td>
                                </tr>
                            </th:block>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- 페이징 코드 -->
        <div class="row justify-content-center">
            <div class="col-auto">
                <nav aria-label="Page navigation example">
                    <ul class="pagination">
                        <th:block th:if="${searchVO.prev}">
                            <li class="page-item">
                                <a class="page-link" th:href="@{/board/qnaList(nowPage=${searchVO.beginPage - 1})}">이전</a>
                            </li>
                        </th:block>
                        <th:block th:each="i : ${#numbers.sequence(searchVO.beginPage, searchVO.endPage)}"> 
                            <!-- 공지사항 목록에서 선택한 페이지 + 조회한 검색 데이터 함께 가져옴 -->   
                            <li class="page-item">
                                <a class="page-link" th:href="@{/board/qnaList(nowPage=${i}, searchValue=${searchVO.searchValue}, searchType=${searchVO.searchType})}">
                                    [[${i}]]
                                </a>
                            </li>
                        </th:block>
                        <th:block th:if="${searchVO.next}">
                            <li class="page-item">
                                <a class="page-link" th:href="@{/board/qnaList(nowPage=${searchVO.endPage + 1})}">다음</a>
                            </li>
                        </th:block>
                    </ul>
                </nav>
            </div>
        </div>

        <!-- 문의사항 게시글 작성 버튼 -->
        <div class="row">
            <div class="col text-end align-middle">
                <input type="button" class="btn btn-primary" value="문의사항 작성" onclick="goWriteQna()">   
            </div>
        </div>

    </div>


    

    

        
</th:block>

<th:block layout:fragment="content_js">
    <script src="/js/board.js"></script>
</th:block>

</html>