<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        layout:decorate="~{fragment/personal_layout}" >

<th:block layout:fragment="content_css">
    <!-- <link rel="stylesheet" href="/"> -->
</th:block>
<body>
<th:block layout:fragment="contentFragment">
        <!-- 공지사항 목록 -->
        <div class="row">
            <div class="col">
                <!-- 게시글 작성 버튼 : 관리자일 때 -->
                    <!-- memberRoll: 1. 학생 / 2. 강사 / 3. 관리자 / - 멤버롤 구분 아직 구현 안 됨!!!!!!!!!!-->
                    <div class="row">
                        <div class="col text-end align-middle">
                            <!-- <th:block th:each="notice : ${noticeList}"> -->
                                <!-- <th:block th:if="${notice.memberRoll == 3}"> -->
                                    <input type="button" class="btn btn-primary" value="게시글 작성" onclick="goWrite()">   
                                <!-- </th:block> -->
                            <!-- </th:block> -->
                            
                        </div>
                    </div>
                <!-- 공지사항 목록 -->
                <div class="row">
                    <table class="notice-list-table table table-striped table-hover text-center align-middle">
                        <colgroup>
                            <col width="10"> 
                            <col width="30">
                            <col width="20">
                            <col width="20">
                            <col width="*">
                        </colgroup>
                        <thead>
                            <tr>
                                <td>No</td>
                                <td>제목</td>
                                <td>작성자</td>
                                <td>조회수 </td>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- 게시글이 없을 때 -->
                            <th:block th:if="${#lists.isEmpty(noticeList)}">
                                <tr>
                                    <td colspan="4"> 조회된 게시글이 없습니다. </td>
                                </tr>
                            </th:block>
                            <!-- 게시글이 있을 때 조회 -->
                            <th:block th:unless="${#lists.isEmpty(noticeList)}">
                                <tr th:each="notice, state : ${noticeList}" >
                                    <td>[[${totalDataCnt - (searchVO.displayDataCnt * (searchVO.nowPage - 1) ) - state.index}]]</td>
                                    <td>
                                        <a th:href="@{/board/noticeDetail(boardNum=${notice.boardNum})}">
                                            [[${notice.boardTitle}]]
                                        </a>
                                    </td>
                                    <td>[[${notice.memberId}]]</td>
                                    <td>[[${notice.boardCnt}]]</td>
                                </tr>
                            </th:block>
                        </tbody>
                    </table>
                </div>

                <!-- 페이징 코드 -->
                <div class="row">
                    <div class="col text-center align-middle">
                        <nav aria-label="Page navigation example">
                            <ul class="pagination">
                                <th:block th:if="${searchVO.prev}">
                                    <li class="page-item">
                                        <a class="page-link" th:href="@{/board/noticeList(nowPage=${searchVO.beginPage - 1})}">이전</a>
                                    </li>
                                </th:block>
                                <th:block th:each="i : ${#numbers.sequence(searchVO.beginPage, searchVO.endPage)}"> 
                                    <!-- 공지사항 목록에서 선택한 페이지 + 조회한 검색 데이터 함께 가져옴 -->   
                                    <li class="page-item">
                                        <a class="page-link" th:href="@{/board/noticeList(nowPage=${i}, searchValue=${searchVO.searchValue}, searchType=${searchVO.searchType})}">
                                            [[${i}]]
                                        </a>
                                    </li>
                                </th:block>
                                <th:block th:if="${searchVO.next}">
                                    <li class="page-item">
                                        <a class="page-link" th:href="@{/board/noticeList(nowPage=${searchVO.endPage + 1})}">다음</a>
                                    </li>
                                </th:block>
                            </ul>
                        </nav>
                    </div>
                </div>
                <!-- 페이징 코드 - 부트스트랩 없는 버전 -->
                    <!-- <div>
                        <th:block th:if="${searchVO.prev}">
                            <a th:href="@{/board/noticeList(nowPage=${searchVO.beginPage - 1})}">이전</a>
                        </th:block>
                        <th:block th:each="i : ${#numbers.sequence(searchVO.beginPage, searchVO.endPage)}">
                            <a th:href="@{/board/noticeList(nowPage=${i}, searchValue=${searchVO.searchValue}, searchType=${searchVO.searchType})}">[[${i}]]</a>
                        </th:block>
                        <th:block th:if="${searchVO.next}">
                            <a th:href="@{/board/noticeList(nowPage=${searchVO.endPage + 1})}">다음</a>
                        </th:block>
                    </div> -->
                
                <!-- 검색 -->
                <form action="/board/noticeList" method="post">
                    <table>
                        <tr>
                            <td>
                                <select class="form-select" name="searchType">
                                    <option value="BOARD_TITLE" th:selected="${searchVO.searchType == NULL or searchVO.searchType == 'BOARD_TITLE'}">제목</option>
                                    <option value="BOARD_CONTENT" th:selected="${searchVO.searchType == BOARD_CONTENT}">내용</option>
                                </select>
                            </td>
                            <td>
                                <input type="text" name="searchValue" th:value="${searchVO.searchValue}">
                            </td>
                            <td>
                                <input type="submit" class="btn btn-primary" value="검색">
                            </td>
                        </tr>
                    </table>
                </form>
            </div>
        </div>
</th:block>

<th:block layout:fragment="content_js">
    <script src="/js/board.js"></script>
</th:block>
</html>