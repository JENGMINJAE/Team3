<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 해당 파일에 모든 쿼리문을 작성 -->
<mapper namespace="teacher">
    <resultMap id="teacherInfo" type="com.green.Team3.member.vo.TeacherVO">
        <id column="TEACHER_NUM"        property="teacherNum"/>
        <result column="TEACHER_CLASS"  property="teacherClass"/>
        <result column="WORK_CODE"      property="workCode"/>
        <result column="MEMBER_ID"      property="memberId"/>
    </resultMap>


    <!--  선생님 전체 목록 조회  -->
    <select id="selectTeachers" resultMap="teacherInfo">
        SELECT T.MEMBER_ID
            , REG_DATE
            , TEACHER_CLASS
            , TEACHER_NUM
            , WORK_CODE
        FROM TEACHER AS T INNER JOIN MEMBER AS M
        ON T.MEMBER_ID = M.MEMBER_ID
        ORDER BY MEMBER_NAME DESC
    </select>

    <!--  선생님 상세 정보 조회  -->
    <select id="detailTeacher" resultMap="teacherInfo">
        SELECT T.MEMBER_ID
            , MEMBER_NAME
            , MEMBER_TELL
            , MEMBER_EMAIL
            , MEMBER_ADDR
            , ADDR_DETAIL
            , MEMBER_GENDER
            , REG_DATE
            , TEACHER_CLASS
            , TEACHER_NUM
            , WORK_CODE
            , CASE
                WHEN WORK_NUM = 1 THEN '재직'
                WHEN WORK_NUM = 2 THEN '퇴직'
                ELSE WORK_NUM = 3 THEN '휴가'
            END AS WORK_STATUS
        FROM TEACHER AS T INNER JOIN MEMBER AS M
        ON T.MEMBER_ID = M.MEMBER_ID
        WHERE TEACHER_NUM = #{teacherNum}
        ORDER BY MEMBER_NAME DESC
    </select>
</mapper>































